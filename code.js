// Generated by CoffeeScript 1.4.0
(function() {
  var Canvas, Game, Snake;

  Canvas = (function() {

    Canvas.prototype.width = 600;

    Canvas.prototype.height = 400;

    function Canvas(background) {
      if (background == null) {
        background = 'white';
      }
      this.canvas = document.getElementById('myCanvas');
      this.ctx = this.canvas.getContext('2d');
      this.background = background;
    }

    Canvas.prototype.clear = function() {
      this.ctx.fillStyle = this.background;
      return this.ctx.fillRect(0, 0, this.width, this.height);
    };

    Canvas.prototype.paintSnake = function(snake) {
      this.ctx.fillStyle = snake.color;
      return this.ctx.fillRect(snake.x * 10, snake.y * 10, 10, 10);
    };

    Canvas.prototype.removeSnake = function(snake) {
      this.ctx.fillStyle = this.background;
      return this.ctx.fillRect(snake.x * 10, snake.y * 10, 10, 10);
    };

    return Canvas;

  })();

  Snake = (function() {

    function Snake(x, y, direction, color) {
      if (x == null) {
        x = 10;
      }
      if (y == null) {
        y = 10;
      }
      if (direction == null) {
        direction = 'up';
      }
      if (color == null) {
        color = 'green';
      }
      this.size = 1;
      this.x = x;
      this.y = y;
      this.direction = direction;
      this.color = color;
    }

    Snake.prototype.move = function() {
      console.log(this.direction);
      switch (this.direction) {
        case 'left':
          return this.x--;
        case 'right':
          return this.x++;
        case 'up':
          return this.y--;
        case 'down':
          return this.y++;
      }
    };

    return Snake;

  })();

  Game = (function() {

    function Game() {
      var processCallback;
      this.armKeyboard();
      this.canvas = new Canvas;
      this.canvas.clear();
      this.snake = new Snake;
      processCallback = this.process.bind(this);
      setInterval(processCallback, 100);
    }

    Game.prototype.armKeyboard = function() {
      var _this = this;
      return document.addEventListener('keydown', function(e) {
        switch (e.keyCode) {
          case 37:
            return _this.snake.direction = 'left';
          case 39:
            return _this.snake.direction = 'right';
          case 38:
            return _this.snake.direction = 'up';
          case 40:
            return _this.snake.direction = 'down';
        }
      });
    };

    Game.prototype.process = function() {
      this.canvas.removeSnake(this.snake);
      this.snake.move();
      return this.canvas.paintSnake(this.snake);
    };

    return Game;

  })();

  window.start = function() {
    var game;
    return game = new Game;
  };

}).call(this);
